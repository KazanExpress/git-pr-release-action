const detect = require('./detect');
const Octokit = require('@octokit/rest');

(async function main([ name, base, head ]) {
  const octokit = Octokit({ auth: process.env.GITHUB_TOKEN });

  const [ owner, repo ] = name.split('/');
  console.log(owner, repo, base, head);
  const pulls = await detect({
    octokit,
    owner,
    repo,
    base,
    head
  });
  console.log(pulls.map(p => p.html_url));
})(process.argv.slice(2)).catch(e => console.log(e));
